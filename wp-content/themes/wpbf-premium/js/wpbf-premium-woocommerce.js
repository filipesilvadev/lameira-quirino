!function(d){var e=d(".wpbf-navigation").data("sub-menu-animation-duration"),o=null,t={},n={};function p(){var e=d(".wpbf-woo-quick-view-modal-content, .wpbf-woo-quick-view-modal");e.fadeOut("300",function(){e.remove()})}function a(){n.overlayOpened&&t.cartPopupOverlay.fadeOut(e,function(){n.overlayOpened=!1})}function i(){d(".wpbf-woo-off-canvas-sidebar").removeClass("active"),d(".wpbf-woo-off-canvas-sidebar-overlay").fadeOut(300)}d(".wpbf-woo-off-canvas-sidebar-button").click(function(){d(".wpbf-woo-off-canvas-sidebar").addClass("active"),d(".wpbf-woo-off-canvas-sidebar-overlay").fadeIn(300)}),d(".wpbf-woo-off-canvas-sidebar-overlay, .wpbf-woo-off-canvas-sidebar .wpbf-close").click(function(){i()}),d(document).keyup(function(e){27==e.keyCode&&d(".wpbf-woo-off-canvas-sidebar-overlay").is(":visible")&&i()}),t.cartPopupOverlay=d(".wpbf-woo-menu-item-popup-overlay"),d(document).on("click",".wpbf-woo-quick-view",function(e){e.preventDefault();var o={action:"wpbf_woo_quick_view",product_id:d(this).data("product_id")},t=d("<div>",{class:"wpbf-woo-quick-view-modal wpbf-clearfix"}),n=d("<i>",{class:"wpbf-close wpbff wpbff-times","aria-hidden":"true"}),a=d(this).closest(".woocommerce");t.prependTo(a),n.appendTo(".wpbf-woo-quick-view-modal"),d(".wpbf-woo-quick-view-modal").fadeIn(300),jQuery.post(wpbf_woo_quick_view.ajax_url,o,function(e){d(e).hide().insertAfter(t).fadeIn(300),d("#wpbf-woo-quick-view-gallery").hasClass("wpbf-siema")&&(mySiema=new Siema({selector:".wpbf-siema",duration:200,easing:"ease-out",perPage:1,startIndex:0,draggable:!0,multipleDrag:!0,threshold:20,loop:!0,rtl:!1}),document.querySelector(".wpbf-quik-view-gallery-prev").addEventListener("click",function(){mySiema.prev()}),document.querySelector(".wpbf-quik-view-gallery-next").addEventListener("click",function(){mySiema.next()}))})}),d(document).on("click",".wpbf-woo-quick-view-modal-content .product:not(.product-type-external) .single_add_to_cart_button",function(e){e.preventDefault(),e.stopImmediatePropagation();var o,t=d(this).parents(".variations_form"),a={},i=!1,n=d(this).parents(".cart").find('input[name="quantity"]').val(),c=0<t.length,u=1==c?t.data("product_id"):d(this).val(),r=t.find('input[name="variation_id"]').val(),f=t.find("select[name^=attribute]");f.length||(f=t.find("[name^=attribute]:checked")),f.length||(f=t.find("input[name^=attribute]")),f.each(function(){var e,o=d(this),t=o.attr("name"),n=o.val();o.removeClass("error"),0===n.length?(e=t.lastIndexOf("_"),t.substring(e+1),i=!0,d(".wpbf-woo-quick-view-modal-content select").each(function(){d(this).val()||d(this).addClass("select-error")})):a[t]=n}),!0!==i&&(o={action:"wpbf_woo_quick_view_add_to_cart",product_id:u,quantity:n,is_variation:c},1==c&&(o.variations=a,o.variation_id=r),jQuery.post(wpbf_woo_quick_view.ajax_url,o,function(e){d(document.body).trigger("wc_fragment_refresh"),d(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash]),p()}))}),d(document).on("click",".wpbf-woo-quick-view-modal-content select",function(){d(this).val()&&d(this).removeClass("select-error")}),d(document).on("click",".wpbf-woo-quick-view-modal",function(){p()}),d(document).keyup(function(e){27==e.keyCode&&d(".wpbf-woo-quick-view-modal-content").is(":visible")&&p()}),d(document.body).on("added_to_cart",function(){setTimeout(function(){d(".wpbf-woo-menu-item.wpbf-woo-menu-item-popup .wpbf-woo-sub-menu").fadeIn(e),t.cartPopupOverlay.fadeIn(e,function(){n.overlayOpened=!0})},250),o=setTimeout(function(){d(".wpbf-woo-menu-item.wpbf-woo-menu-item-popup .wpbf-woo-sub-menu").fadeOut(e),a()},4e3)}),d(document).on("mouseenter",".wpbf-woo-menu-item-popup",function(){n.overlayOpened&&clearTimeout(o)}),d(document).on("mouseleave",".wpbf-woo-menu-item-popup",function(){a()})}(jQuery);